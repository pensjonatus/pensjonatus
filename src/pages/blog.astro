---
import BlogpostList from '@components/BlogpostList.astro';
import BaseLayout from '@layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const allPosts = await getCollection('posts');
allPosts.sort((a, b) => (a.data.date < b.data.date ? 1 : -1));
---

<BaseLayout pageTitle="Blog">
  <p>The blog currently contains {allPosts.length} entries.</p>
  <BlogpostList
    items={allPosts.map((post) => ({
      title: post.data.title,
      date: post.data.date,
      slug: post.slug,
    }))}
  />
</BaseLayout>
